import{f as v,a as I,B as g,u as w,_ as y,b as f,j as x,d as o,w as r,l as N,r as a,o as l,i as d,M as T,e as u,g as c,n as k}from"./index-eba71058.js";import L from"./Switch-2a98c72b.js";import C from"./Textarea-90cf8d39.js";import M from"./List-0646a804.js";const V={data(){return{name:"",text:"",keyword:"",snippet:"",snippets:[],keywords:null}},mounted(){this.load()},computed:{names(){return this.keywords||this.snippets.map(e=>e.name)}},methods:{load(){v(`${w}/load`,{file:"snippets.json"}).then(e=>{this.name=e.name,this.snippets=JSON.parse(e.snippets)||[],this.text=this.snippets.find(t=>t.name==this.name).text}).catch(e=>this.error=e)},save(){if(this.text){let e=this.snippets.findIndex(t=>t.name==this.name);e>=0?this.snippets[e]={name:this.name,text:this.text}:this.snippets.push({name:this.name,text:this.text}),this.save_()}},input(e){this.text=e},save_(){let e={name:this.name,file:"snippets.json",snippets:JSON.stringify(this.snippets||[])};v(`${w}/save`,e).catch(t=>this.error=t)},filter(e){this.keywords=this.snippets.filter(t=>t.name.includes(e)).map(t=>t.name)},insert(){this.$emit("insert",this.text)},rename(e){this.name=e},clickItem(e){let t=this.snippets.find(n=>n.name==e);this.name=t.name,this.text=t.text},removeItem(e){this.snippets=this.snippets.filter(t=>t.name!=e),this.save_()}},emits:["insert"],components:{List:M,Input:I,Button:g,Textarea:C}};const E={class:"snippets",style:{height:"99%"}},j={class:"toolbar"},H={class:"snippet",style:{height:"92%"}};function J(e,t,n,S,i,s){const h=a("Input"),m=a("Button"),p=a("list"),_=a("Textarea");return l(),f("section",E,[x("section",j,[o(h,{class:"name",label:"name:",value:i.name,width:"30%",onInput:s.rename,float:"unset"},null,8,["value","onInput"]),o(h,{class:"filter",label:"filter:",value:i.keyword,width:"30%",onInput:s.filter,float:"unset"},null,8,["value","onInput"]),o(m,{class:"save_",onClick:s.save},{default:r(()=>[d("Save")]),_:1},8,["onClick"]),o(m,{class:"insert",onClick:N(s.insert,["stop"])},{default:r(()=>[d("Insert")]),_:1},8,["onClick"])]),x("section",H,[o(p,{items:s.names,selected:i.name,height:"unset",width:"16%",onRemoveItem:s.removeItem,onClickItem:s.clickItem,toggle_:!1},null,8,["items","selected","onRemoveItem","onClickItem"]),o(_,{width:"80%",text:i.text,onInput:s.input},null,8,["text","onInput"])])])}const O=y(V,[["render",J]]),R={data(){return{pos:0,hide:!1,style:null,mode:"preview"}},props:{left:{},width:{},height:{type:Number},margin:{default:16},text:{default:""},name:{default:"Note"}},methods:{rename(e,t){this.$emit("save",e)},save(e){return this.$emit("save",this.name,this.text),e},switch_(e){this.mode=e},insert(e){this.hide=!0;let t=this.text.substring(0,this.pos),n=this.text.substring(this.pos);this.$emit("save",this.name,t+e+n,!1)},click(){this.hide=!1},cursor(e){this.pos=e},input(e){this.$emit("save",this.name,e,!1)}},components:{Input:I,Button:g,Switch:L,Modal:T,Snippets:O,Textarea:C},emits:["save"]};const z={class:"editor"},A=["innerHTML"];function q(e,t,n,S,i,s){const h=a("Switch"),m=a("Input"),p=a("Button"),_=a("Snippets"),B=a("modal"),b=a("Textarea");return l(),f("section",z,[x("section",{class:"toolbar",style:k({marginLeft:`${this.left+this.margin}px`})},[o(h,{height:20,width:20,_on:"preview",off:"edit",onSwitch:s.switch_},null,8,["onSwitch"]),i.mode=="edit"?(l(),u(m,{key:0,class:"name",value:n.name,width:"10%",onInput:s.rename,float:"unset"},null,8,["value","onInput"])):c("",!0),o(B,{hide:i.hide},{trigger:r(()=>[i.mode=="edit"?(l(),u(p,{key:0,class:"snippets",onClick:s.click},{default:r(()=>[d("Snippets")]),_:1},8,["onClick"])):c("",!0)]),content:r(()=>[o(_,{onInsert:s.insert},null,8,["onInsert"])]),_:1},8,["hide"]),i.mode=="edit"?(l(),u(p,{key:1,class:"save",onClick:s.save},{default:r(()=>[d("Save")]),_:1},8,["onClick"])):c("",!0)],4),i.mode=="preview"?(l(),f("section",{key:0,class:"preview",style:k({marginLeft:`${this.left+this.margin}px`}),innerHTML:n.text},null,12,A)):c("",!0),i.mode=="edit"?(l(),u(b,{key:1,text:n.text,left:n.left,margin:n.margin,width:n.width,height:n.height-32,onCursor:s.cursor,onInput:s.input},null,8,["text","left","margin","width","height","onCursor","onInput"])):c("",!0)])}const P=y(R,[["render",q]]);export{P as default};
