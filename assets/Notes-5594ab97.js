import{$ as s,f as m,u as r,_ as g,b as _,d,w,F as u,r as a,o as v}from"./index-eba71058.js";import x from"./List-0646a804.js";import W from"./Aside-c2f94b25.js";import I from"./Editor-96630f04.js";import"./Switch-2a98c72b.js";import"./Textarea-90cf8d39.js";const k={data(){return{asideWidth:0,asideWidth_:0,notes:[],name:"",text:"",width:0,height:0}},mounted(){this.load(),this.asideWidth_=s(window).width()<1480?280:320,this.width=s(window).width()-(this.asideWidth||this.asideWidth_)-this.margin-this.padding,this.height=s(window).height()-s(".nav").height()-this.margin-this.padding-32},update(){this.width=s(window).width()-(this.asideWidth||this.asideWidth_)-this.margin-this.padding,this.height=s(window).height()-s(".nav").height()-this.margin-this.padding-32},computed:{names(){return this.notes.map(t=>t.name)}},methods:{load(){m(`${r}/load`,{file:"notes.json"}).then(t=>{this.name=t.name,this.notes=JSON.parse(t.notes)||[],this.text=this.notes.find(e=>e.name==this.name).text}).catch(t=>this.error=t)},save(t,e,n=!0){if(this.name=t,e){this.text=e;let o=this.notes.findIndex(i=>i.name==t);o>=0?this.notes[o]={name:t,text:e}:this.notes.push({name:t,text:e}),n&&this.save_()}},save_(){let t={name:this.name,file:"notes.json",notes:JSON.stringify(this.notes||[])};m(`${r}/save`,t).catch(e=>this.error=e)},clickItem(t){let e=this.notes.find(n=>n.name==t);this.name=e.name,this.text=e.text},removeItem(t){this.notes=this.notes.filter(e=>e.name!=t),this.save_()}},props:{margin:{default:32},padding:{default:16}},components:{List:x,Aside:W,Editor:I}};function S(t,e,n,o,i,h){const l=a("list"),c=a("Aside"),f=a("Editor");return v(),_(u,null,[d(c,{margin:0,width:i.asideWidth_,onSetWidth:e[0]||(e[0]=p=>i.asideWidth=p)},{default:w(()=>[d(l,{items:h.names,selected:i.name,height:"94%",onRemoveItem:h.removeItem,onClickItem:h.clickItem,toggle_:!1},null,8,["items","selected","onRemoveItem","onClickItem"])]),_:1},8,["width"]),d(f,{left:i.asideWidth||i.asideWidth_,width:i.width,height:i.height,name:i.name,text:i.text,onSave:h.save},null,8,["left","width","height","name","text","onSave"])],64)}const J=g(k,[["render",S]]);export{J as default};
