import{c as I,$ as d,f as m,I as W,a as j,B as y,D as S,u as p,_ as x,b as B,d as a,w as l,e as C,n as k,g as D,r as h,o as u,h as _,i as A}from"./index-eba71058.js";import H from"./List-0646a804.js";import L from"./Aside-c2f94b25.js";import R from"./Chart-d04bcb05.js";import z from"./Gallery-b00a94e8.js";import"./Switch-2a98c72b.js";import"./Drawing-ed2596b5.js";import"./Circle-6796e60d.js";const N={data(){return{out:"",sep:"",src:"",left:0,size:0,data:"",task:"",width:1,error:"",height:1,paths:[],shape:"",margin:16,object:"",subset:"",padding:16,objects:[],color:I,asideWidth:0,asideWidth_:0}},mounted(){this.load(),this.asideWidth_=d(window).width()<1480?280:320},updated(){this.width=d(window).width()-(this.asideWidth?this.asideWidth:this.asideWidth_)-this.margin-this.padding,this.height=d(window).height()-d(".nav").height()-this.margin-this.padding-8},computed:{items(){return this.objects.map(t=>t.id_)}},methods:{load(){m(`${p}/load`,{file:"ai.json"}).then(t=>{this.shape=t.shape||"",this.subset=t.subset||"",this.data=t.data_dir||"",this.fetch_()}).catch(t=>this.error=t)},save(t,s){s&&t&&(this[s.split(" ")[0].toLowerCase()]=t);let o={file:"ai.json",shape:this.shape||"",subset:this.subset||"",data_dir:this.data||""};m(`${p}/save`,o).catch(n=>this.error=n)},fetch_(t){this.paths=[];let s={path:this.data,subset:this.subset};return m(`${p}/listdir`,s).then(o=>{let n=o["/"];this.sep=o["/sep"],delete o["/"],delete o["/sep"],this.paths=Object.keys(o).filter((e,i)=>n[i]=="image").map(e=>this.data+this.sep+this.subset+this.sep+e)}).catch(o=>this.error=o),t},hoverItem(t){this.object=t},removeItem(t){this.objects=this.objects.filter(s=>s.id_!=t)}},components:{Icon:W,List:H,Aside:L,Chart:R,Input:j,Button:y,Gallery:z,Dropdown:S}};const V={class:"data"};function O(t,s,o,n,e,i){const b=h("Input"),r=h("dropdown"),v=h("Button"),g=h("list"),f=h("Aside"),w=h("gallery");return u(),B("section",V,[a(f,{class:"data",margin:0,width:e.asideWidth_,onSetWidth:s[0]||(s[0]=c=>e.asideWidth=c)},{default:l(()=>[a(r,{class:_("accordion"),accordion:"Basic"},{default:l(()=>[a(b,{label:"Data Path",value:e.data,icon:"folder",height:24,box:32,right:!0,onInput:i.save},null,8,["value","onInput"]),a(r,{label:"Shape",items:["rect","circle","path"],onSelect:i.save,value:e.shape},null,8,["onSelect","value"]),a(r,{label:"Subset",items:["train","val","test"],onSelect:i.save,value:e.subset},null,8,["onSelect","value"]),a(v,{onClick:i.fetch_},{default:l(()=>[A("Fetch")]),_:1},8,["onClick"])]),_:1}),a(r,{class:_("accordion"),accordion:"Label"},{default:l(()=>[a(g,{items:i.items,selected:e.object,onHoverItem:i.hoverItem,onRemoveItem:i.removeItem},null,8,["items","selected","onHoverItem","onRemoveItem"])]),_:1})]),_:1},8,["width"]),e.paths.length?(u(),C(w,{key:0,paths:e.paths,shape:e.shape,sep:e.sep,width:e.width,height:e.height,margin:e.margin,padding:e.padding,style:k({marginLeft:`${e.asideWidth?e.asideWidth:e.asideWidth_}px`}),objects:e.objects,selected:e.object,onSetObjects:s[1]||(s[1]=c=>e.objects=c),onHoverItem:i.hoverItem,onRemoveItem:i.removeItem},null,8,["paths","shape","sep","width","height","margin","padding","style","objects","selected","onHoverItem","onRemoveItem"])):D("",!0)])}const M=x(N,[["render",O]]);export{M as default};
